@startuml store_step_flow
title Store Step - Execution Flow

participant "Engine" as engine
participant "Game" as game
participant "Worker" as worker

== Execute Store Step ==

engine -> game : onStepStarted(worker_id, ws_id,\n{type: .Store})

note right of game
  Game receives step callback
  and handles execution:
  1. Pickup item from workstation
  2. Determine destination storage
  3. Move worker to destination
  4. Drop item animation
end note

game -> worker : pickupFrom(workstation)

game -> game : findDestination(item_type)
game -> worker : moveTo(destination)
worker -> worker : drop item

== Step Complete ==
game -> engine : notifyStepComplete(worker_id)

note right of engine
  Engine advances to next step
  or completes cycle if last step
end note

@enduml
